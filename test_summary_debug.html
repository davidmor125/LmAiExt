<!DOCTYPE html>
<html lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”§ ×‘×“×™×§×ª ×ª×™×§×•×Ÿ ×›×¤×ª×•×¨ ×”×¡×™×›×•×</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            direction: rtl;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        h1 {
            color: #182857;
            text-align: center;
            margin-bottom: 30px;
        }
        .status {
            background: #cce5ff;
            color: #004085;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 1px solid #b3d9ff;
        }
        .test-text {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #ffc107;
            margin: 20px 0;
            user-select: text;
            cursor: text;
            font-size: 16px;
            line-height: 1.8;
        }
        .instruction {
            background: #d1ecf1;
            color: #0c5460;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .debug-info {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            color: #495057;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ×‘×“×™×§×ª ×ª×™×§×•×Ÿ ×›×¤×ª×•×¨ ×”×¡×™×›×•×</h1>
        
        <div class="status">
            <strong>ğŸ“‹ ××” ×ª×•×§×Ÿ:</strong><br>
            âœ… ×ª×™×§×•×Ÿ message passing ×‘×™×Ÿ content ×•-background scripts<br>
            âœ… ×”×•×¡×¤×ª ×œ×•×’×™× ×’ ××¤×•×¨×˜ ×œ××™×ª×•×¨ ×‘×¢×™×•×ª<br>
            âœ… ×©×™×¤×•×¨ error handling ×¢× ×”×•×“×¢×•×ª ×‘×¨×•×¨×•×ª<br>
            âœ… ×ª×™×§×•×Ÿ ×”×’×“×¨×•×ª ×›×¤×ª×•×¨ ×‘×¢×ª ×©×’×™××•×ª
        </div>

        <div class="instruction">
            <strong>ğŸ§ª ×›×™×¦×“ ×œ×‘×“×•×§:</strong><br>
            1. ×•×•×“× ×©×”×ª×•×¡×£ Better Me ××•×ª×§×Ÿ<br>
            2. ×¤×ª×— Developer Tools (F12)<br>
            3. ×¢×‘×•×¨ ×œ×˜××‘ Console<br>
            4. ×¡××Ÿ ××ª ×”×˜×§×¡×˜ ×”×¦×”×•×‘ ×œ××˜×”<br>
            5. ×œ×—×¥ ×¢×œ ×›×¤×ª×•×¨ "×¡×›×" ×‘×ª×¤×¨×™×˜ ×”×¦×£<br>
            6. ×¢×§×•×‘ ××—×¨ ×”×”×•×“×¢×•×ª ×‘×§×•× ×¡×•×œ
        </div>

        <div class="test-text">
            ğŸ¯ ×˜×§×¡×˜ ×œ×‘×“×™×§×ª ×”×¡×™×›×•×: ×‘×™× ×” ××œ××›×•×ª×™×ª ××”×•×•×” ××—×“ ××”×ª×—×•××™× ×”××ª×¤×ª×—×™× ×‘×™×•×ª×¨ ×‘×˜×›× ×•×œ×•×’×™×” ×”××•×“×¨× ×™×ª. 
            ×‘××”×œ×š ×”×©× ×™× ×”××—×¨×•× ×•×ª, ×× ×• ×¢×“×™× ×œ×¤×¨×™×¦×•×ª ×“×¨×š ××©××¢×•×ª×™×•×ª ×‘×ª×—×•× ×”×œ××™×“×” ×”×¢××•×§×” ×•×¢×™×‘×•×“ ×©×¤×” ×˜×‘×¢×™×ª. 
            ×˜×›× ×•×œ×•×’×™×•×ª ××œ×• ×××¤×©×¨×•×ª ×œ××—×©×‘×™× ×œ×‘×¦×¢ ××©×™××•×ª ××•×¨×›×‘×•×ª ×©×“×¨×©×• ×‘×¢×‘×¨ ××™× ×˜×œ×™×’× ×¦×™×” ×× ×•×©×™×ª. 
            ×›×™×•×, ×‘×™× ×” ××œ××›×•×ª×™×ª ××©××©×ª ×‘××’×•×•×Ÿ ×¨×—×‘ ×©×œ ×™×™×©×•××™×: ×××‘×—×•×Ÿ ×¨×¤×•××™ ××ª×§×“× ×•×¢×“ ×œ×¨×›×‘×™× ××•×˜×•× ×•××™×™×, 
            ××ª×¨×’×•× ×©×¤×•×ª ×•×¢×“ ×œ×™×¦×™×¨×” ××× ×•×ª×™×ª. ×¢× ×–××ª, ×—×©×•×‘ ×œ×–×›×•×¨ ×©×¢×œ×™× ×• ×œ×”×ª××•×“×“ ×¢× ××ª×’×¨×™× ××ª×™×™× ×•×—×‘×¨×ª×™×™× 
            ×”× ×•×‘×¢×™× ××”×©×™××•×© ×”×’×•×‘×¨ ×‘×˜×›× ×•×œ×•×’×™×•×ª ××œ×•, ×•×œ×•×•×“× ×©×”×¤×™×ª×•×— × ×¢×©×” ×‘××•×¤×Ÿ ××—×¨××™ ×•××§×™×™×.
        </div>

        <div class="instruction">
            <strong>ğŸ” ××” ×œ×—×¤×© ×‘×§×•× ×¡×•×œ:</strong><br>
            <div class="debug-info">
                ğŸ¯ getSummaryForText called with text length: [××¡×¤×¨]<br>
                ğŸ“¤ Message sent to background script<br>
                ğŸ¤– processAIRequest started<br>
                âš™ï¸ Getting settings from storage...<br>
                ğŸš€ Calling AI API...<br>
                ğŸ“¥ Response status: [×¡×˜×˜×•×¡]<br>
                âœ… ××• âŒ [×”×•×“×¢×ª ×ª×•×¦××”]
            </div>
        </div>

        <div class="status" id="test-status">
            <strong>ğŸ“Š ×¡×˜×˜×•×¡ ×”×‘×“×™×§×”:</strong> ×××ª×™×Ÿ ×œ×‘×“×™×§×”...
        </div>

        <div class="instruction">
            <strong>ğŸ› ï¸ ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª:</strong><br>
            â€¢ ×× ××™×Ÿ ×ª×¤×¨×™×˜ ×¦×£ - ×•×•×“× ×©×”×ª×•×¡×£ ××•×ª×§×Ÿ ×•×¤×¢×™×œ<br>
            â€¢ ×× ×™×© ×©×’×™××ª ×—×™×‘×•×¨ - ×‘×“×•×§ ×©×”-AI ×©×œ×š (LMStudio/Ollama) ×¤×•×¢×œ<br>
            â€¢ ×× ×™×© ×©×’×™××ª API - ×‘×“×•×§ ×”×’×“×¨×•×ª ×›×ª×•×‘×ª ×”-API<br>
            â€¢ ×× ××™×Ÿ ×ª×’×•×‘×” - ×‘×“×•×§ ××ª ×”×§×•× ×¡×•×œ ×œ×©×’×™××•×ª
        </div>
    </div>

    <script>
        console.log('ğŸ§ª ×“×£ ×‘×“×™×§×ª ×ª×™×§×•×Ÿ ×”×¡×™×›×•× × ×˜×¢×Ÿ');
        
        // Monitor text selection
        document.addEventListener('selectionchange', function() {
            const selection = window.getSelection().toString().trim();
            if (selection.length > 10) {
                console.log('ğŸ¯ ×˜×§×¡×˜ × ×‘×—×¨:', selection.substring(0, 50) + '...');
                updateStatus('×˜×§×¡×˜ × ×‘×—×¨ - ××—×¤×© ×ª×¤×¨×™×˜ ×§×•× ×˜×§×¡×˜...', '#007bff');
            }
        });
        
        // Monitor for Better Me extension
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                if (document.getElementById('betterme-bubble')) {
                    console.log('âœ… Better Me bubble × ××¦× - ×”×ª×•×¡×£ ×¤×¢×™×œ');
                    updateStatus('âœ… ×”×ª×•×¡×£ Better Me ×–×•×”×” ×•×¤×¢×™×œ', '#28a745');
                } else {
                    console.log('âš ï¸ ×œ× × ××¦× Better Me bubble - ×‘×“×•×§ ×©×”×ª×•×¡×£ ××•×ª×§×Ÿ');
                    updateStatus('âš ï¸ ×œ× ×–×•×”×” ×ª×•×¡×£ Better Me - ×•×•×“× ×©×”×•× ××•×ª×§×Ÿ ×•×¤×¢×™×œ', '#ffc107');
                }
            }, 2000);
        });
        
        // Monitor for context menu
        setInterval(() => {
            const menu = document.getElementById('betterme-context-menu');
            if (menu && menu.style.display !== 'none') {
                updateStatus('ğŸ¯ ×ª×¤×¨×™×˜ ×§×•× ×˜×§×¡×˜ ××•×¤×™×¢ - ×œ×—×¥ ×¢×œ ×›×¤×ª×•×¨ "×¡×›×"', '#17a2b8');
            }
        }, 500);
        
        // Monitor for summary dialog
        setInterval(() => {
            const dialog = document.getElementById('betterme-quick-summary');
            if (dialog) {
                updateStatus('ğŸ”„ ×“×™××œ×•×’ ×¡×™×›×•× × ×¤×ª×— - ××¢×‘×“ ×‘×§×©×”...', '#6c757d');
            }
        }, 500);
        
        function updateStatus(message, color = '#6c757d') {
            const statusElement = document.getElementById('test-status');
            statusElement.innerHTML = `<strong>ğŸ“Š ×¡×˜×˜×•×¡ ×”×‘×“×™×§×”:</strong> ${message}`;
            statusElement.style.borderColor = color;
        }
        
        // Log console messages for debugging
        const originalLog = console.log;
        const originalError = console.error;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            if (args[0] && typeof args[0] === 'string') {
                if (args[0].includes('getSummaryForText')) {
                    updateStatus('ğŸ¯ ×¤×•× ×§×¦×™×™×ª ×¡×™×›×•× ×”×•×¤×¢×œ×”', '#007bff');
                } else if (args[0].includes('Message sent to background')) {
                    updateStatus('ğŸ“¤ ×”×•×“×¢×” × ×©×œ×—×” ×œbackground script', '#28a745');
                } else if (args[0].includes('AI response received')) {
                    updateStatus('âœ… ×ª×’×•×‘×” ×”×ª×§×‘×œ×” ××”-AI ×‘×”×¦×œ×—×”!', '#28a745');
                } else if (args[0].includes('processAIRequest started')) {
                    updateStatus('ğŸ¤– ××¢×‘×“ ×‘×§×©×ª AI...', '#17a2b8');
                }
            }
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            if (args[0] && typeof args[0] === 'string') {
                if (args[0].includes('AI processing error')) {
                    updateStatus('âŒ ×©×’×™××” ×‘×¢×™×‘×•×“ AI - ×‘×“×•×§ ×”×’×“×¨×•×ª', '#dc3545');
                } else if (args[0].includes('fetch')) {
                    updateStatus('âŒ ×©×’×™××ª ×—×™×‘×•×¨ - ×•×•×“× ×©×”-AI ×¤×•×¢×œ', '#dc3545');
                }
            }
        };
    </script>
</body>
</html>
